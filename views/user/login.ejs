
<%- include('../partials/header')  %>



<!-- Main Content (Login Form) -->
<main class=" flex-grow flex items-center justify-center py-8">
  <div class="w-full max-w-md p-8 space-y-6 bg-white shadow-lg rounded-lg">
    <h2 class="text-3xl font-bold text-center text-primary-dark">Login</h2>

    <form action="user/login" method="post" class="space-y-4">
      <!-- Username Input -->
      <div>
        <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
        <input id="username" name="username" type="text"  class="w-full p-2 mt-1 border border-gray-300 rounded-md focus:ring-primary-light focus:border-primary-light">
      </div>

      <!-- Password Input -->
      <div>
        <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
        <input id="password" name="password" type="password"  class="w-full p-2 mt-1 border border-gray-300 rounded-md focus:ring-primary-light focus:border-primary-light">
      </div>

      <!-- Submit Button -->
      <div>
        <button type="submit" class="w-full py-2 text-white bg-button rounded-md hover:bg-blue-900 focus:outline-none">Sign in</button>
      </div>

      <!-- Additional Links -->
      <div class="flex items-center justify-between">
        <a href="#" class="text-sm text-primary-light hover:underline">Forgot your password?</a>
        <a href="user/signup" class="text-sm text-primary-light hover:underline">Create an account</a>
      </div>

      <%   if(locals.error){ %>
        <p class="text-red-600"> <%= error %> </p>
      <% } %>
    </form>
  </div>
</main>
<% if (locals.message && locals.alertType) { %>
  <script>
    Swal.fire({
      icon: "<%= alertType %>", 
      title: "<%= alertType === 'success' ? 'Success!' : 'Error!' %>",
      text: "<%= message %>",
      confirmButtonColor: "#10375C"
    });
  </script>
<% } %>


<script>

  document.addEventListener('DOMContentLoaded', function() {
    document.querySelector("form").addEventListener("submit", formValidate);
  });
  
  function formValidate(e) {
    e.preventDefault();
  
 
    let username = document.getElementById('username').value;
    let password = document.getElementById('password').value;
  
    if (username === "" || password === "" ) {
      Swal.fire({
        icon: "error",
        title: "Error!",
        text: "All fields are required",
        confirmButtonColor: "#10375C" 
      });
      return false;
    } 
    // Allow form submission if validation passes
    e.target.submit();
    return true
  }
  
  </script>
  
  <%- include("../partials/footer") %>